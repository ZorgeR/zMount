#!/bin/sh

# zMount by Zorge.R
# please don't modify code
# Использование скрипта в корыстных целях преследуется по понятиям Российской Федерации.
# За модификацию без спроса, получите серпом по ... колосьям.

path=`cat /ezxlocal/zmountpath`

##################################################################################
# AUTORUN FOLDER
# Задаем папку авторана. В неё будут улетать скрипты автозапуска.
# Если у вас папка авторана, отлична от ниже используемой, просто замените её в файле autorundir.
AUTORUNDIR=`cat $path/autorundir`
##################################################################################

#################################################################################
# Задаем переменную NUM для скрипта
# Чтобы каждый раз, имя скрипта добавляемого в авторан, отличалось, для того чтобы можно было добавлять и добавлять.
number=`cat $path/number`
# задаем слогаемое
slog=1
# можно менять, по вкусу. влияет только на красивость имен файлов в unKnown
#################################################################################

# грабим переменные
KUDA=`cat $path/KUDA`
OTKUDA=`cat $path/OTKUDA`

# монтируем
	mount -o bind "$OTKUDA" "$KUDA"
# создаем вывод в виде файла S01zmount_НОМЕР.txt, где НОМЕР будет заменен на счетчик
	echo -ne "#!/bin/sh
# This script genereted by zMount
# Zorge.R - 2010 - motofan.ru

mount -o bind "$OTKUDA" "$KUDA"" >"$AUTORUNDIR"/S01zmount_$number.txt

# обновляем счетчик NUM
let nextnum=$number+$slog
# Записываем данные счетчика в файл. #####
	echo -ne "$nextnum" >$path/number
showQ "Info" "Mounting done. Autorun created successfully." 2

